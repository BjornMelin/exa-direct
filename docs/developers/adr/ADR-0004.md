# ADR-0004: Streaming Strategy (SSE + REST) With Polling Fallback

**Date:** 2025-10-16  
**Status:** Accepted  
**Drivers:** Real-time progress visibility without extra deps.

## Context
Research API supports SSE (`?stream=true`). Not all environments handle SSE reliably.

## Decision
Implement SSE via `requests` streaming; keep `poll` as fallback.

### Decision Framework Scoring
| Option                           | Coverage | Latency | Ergonomics | Invocability | Maintenance | Extensibility | Weighted |
|----------------------------------|----------|---------|------------|--------------|-------------|---------------|----------|
| **REST SSE + requests (FINAL)**  | 10       | 9       | 9          | 9            | 9           | 9             | 9.30     |
| Poll only                        | 8        | 7       | 9          | 9            | 10          | 8             | 8.40     |
| SSE via third-party dependency   | 10       | 9       | 9          | 9            | 8           | 9             | 9.05     |

## Consequences
Minimal deps; explicit streaming path and reliable fallback.

## Alternatives Considered
Polling only; sseclient dependency.

## Implementation Notes
`Accept: text/event-stream`; print lines; long timeout; `poll` presets by model.

## References
- https://docs.exa.ai/reference/research/get-a-task
